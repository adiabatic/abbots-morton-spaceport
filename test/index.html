<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Abbots Morton Spaceport Mono</title>
  <link rel="preload" href="DepartureMono-Regular.otf" as="font" type="font/otf">
  <link rel="preload" href="AbbotsMortonSpaceportMono.otf" as="font" type="font/otf">
  <link rel="preload" href="AbbotsMortonSpaceportSansJunior.otf" as="font" type="font/otf">
  <link rel="preload" href="AbbotsMortonSpaceportSansSenior.otf" as="font" type="font/otf">
  <link rel="stylesheet" href="shared.css">
  <style>
    :root {
      --font-stack: "Abbots Morton Spaceport Mono", "Departure Mono", monospace;
      --font-size: 22px; /* Departure Mono is pixel-perfect at multiples of 11px */
    }

    body {
      max-width: 900px;
    }

    h1 {
      margin-top: 1.5em;
    }

    .sample {
      font-family: var(--font-stack);
      font-size: var(--font-size);
      line-height: 1.5;
      /* Disable font smoothing for crisp pixels */
      -webkit-font-smoothing: none;
      -moz-osx-font-smoothing: grayscale;
      font-smooth: never;
    }

    .sample-box {
      background: light-dark(#fff, #2a2a2a);
      border: 1px solid light-dark(#ccc, #444);
      padding: 1.5rem;
      margin: 1rem 0;
      border-radius: 4px;
    }

    .size-test {
      margin: 0.5rem 0;
    }

    .controls {
      margin: 1rem 0;
      padding: 1rem;
      background: light-dark(#fff, #2a2a2a);
      border: 1px solid light-dark(#ccc, #444);
      border-radius: 4px;

      label {
        display: block;
        margin-bottom: 0.5rem;
      }

      input[type="range"] {
        width: 200px;
      }
    }

    .size-label {
      color: light-dark(#666, #888);
      margin-bottom: 0.25rem;
    }

    pre {
      font-family: var(--font-stack);
      -webkit-font-smoothing: none;
      white-space: pre-wrap;
    }

    .sample-box h3 {
      color: light-dark(#0066cc, #4a9eff);
      font-size: var(--font-size);
      font-weight: normal;
      text-align: center;
    }

    .sample-box hr {
      opacity: 0.5;
    }

    .pairings {
      font-size: var(--font-size);
      margin-inline: auto;
      border-spacing: .5ch 0;

      td {
        text-align: center;
      }

      td.highlighted {
        background: light-dark(#fff3cd, #5a4800);
      }
    }

    #sample-quikscript {
      border-spacing: 1ch 0;

      td {
        padding: 0;
      }
    }

    .toggle-buttons {
      position: fixed;
      top: 1rem;
      right: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      z-index: 1000;

      button {
        padding: 0.75rem 1.5rem;
        font-size: var(--font-size);
        font-family: inherit;
        background: light-dark(#0066cc, #4a9eff);
        color: light-dark(#fff, #1a1a1a);
        border: none;
        border-radius: 4px;
        cursor: pointer;
        -webkit-font-smoothing: none;

        &:hover {
          background: light-dark(#0055aa, #6ab0ff);
        }
      }

      #font-toggle,
      #level-toggle {
        min-width: 10ch;
      }
    }
  </style>
  <script type="module">
    const slider = document.getElementById('size-slider');
    const sizeValue = document.getElementById('size-value');
    const samples = document.querySelectorAll('#sample-upper, #sample-lower, #sample-numbers, #sample-punct, #sample-text');

    slider.addEventListener('input', (e) => {
      const size = e.target.value;
      sizeValue.textContent = size;
      for (const el of samples) {
        el.style.fontSize = size + 'px';
      }
    });

    const title = document.querySelector('h1');
    const pangramBox = document.querySelector('#sample-text').closest('.sample-box');
    pangramBox.style.minHeight = pangramBox.offsetHeight + 'px';

    const fontOrderToggle = document.getElementById('font-order-toggle');
    const fontToggle = document.getElementById('font-toggle');
    const levelToggle = document.getElementById('level-toggle');

    let isSans = true;
    let isSenior = true;
    let dmFirst = false;

    function applyState() {
      let fontFamily, fontTitle;
      if (isSans) {
        const level = isSenior ? 'Senior' : 'Junior';
        fontFamily = `'Abbots Morton Spaceport Sans ${level}'`;
        fontTitle = `Abbots Morton Spaceport Sans ${level}`;
        levelToggle.textContent = level;
        levelToggle.hidden = false;
      } else {
        fontFamily = "'Abbots Morton Spaceport Mono'";
        fontTitle = 'Abbots Morton Spaceport Mono';
        levelToggle.hidden = true;
      }

      const fontStack = dmFirst
        ? `'Departure Mono', ${fontFamily}, monospace`
        : `${fontFamily}, 'Departure Mono', monospace`;

      document.documentElement.style.setProperty('--font-stack', fontStack);
      title.textContent = fontTitle;
      document.title = fontTitle;
      fontToggle.textContent = isSans ? 'Sans' : 'Mono';
    }

    fontToggle.addEventListener('click', () => {
      isSans = !isSans;
      applyState();
    });

    levelToggle.addEventListener('click', () => {
      isSenior = !isSenior;
      applyState();
    });

    fontOrderToggle.addEventListener('click', () => {
      dmFirst = !dmFirst;
      fontOrderToggle.textContent = dmFirst ? 'DM first' : 'AMS first';
      applyState();
    });

    // Initialize
    applyState();
  </script>
</head>
<body>
  <h1>Abbots Morton Spaceport Mono</h1>
  <p>Want it? <a href="https://github.com/adiabatic/abbots-morton-spaceport">Get it on GitHub</a>.</p>

  <div class="toggle-buttons">
    <button id="font-order-toggle" title="Nothing should change when this button is clicked if AMS Mono is in use.">AMS first</button>
    <button id="font-toggle">Sans</button>
    <button id="level-toggle">Senior</button>
    <button id="clear-highlights" title="Clear all highlighted cells (Escape)">Clear HL</button>
  </div>

  <div class="controls">
    <label>
      Font size: <span id="size-value">22</span>px
      <input type="range" id="size-slider" min="11" max="77" value="22">
    </label>
  </div>

  <h2>Pangram (editable)</h2>
  <div class="sample-box">
    <div class="sample" id="sample-text" contenteditable>
      <p>What is the price of a foot-bath kit? A goose in a dress near North Square thought it would cure jelly ankle. The goat nurse suggested palm oil in the mouth or wrapped around the ankle with a cloth. (Shiny yellow cheese helps with night vision on the ax exams in both Llanberis and Loch Affric.)</p>
      <p>      - ?       ·       .                 .              ·   ·.</p>
    </div>
  </div>

  <h2>Joins</h2>
  <div class="sample-box">
    <table class="pairings">
      <tr>
        <td>merry</td>
        <td>Mary</td>
        <td>marry</td>
        <td>mire</td>
        <td>mar</td>
        <td>more</td>
        <td>moor</td>
        <td>mere</td>
        <td>murder</td>
        <td>sour</td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>-</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>merry</td>
        <td>Mary</td>
        <td>marry</td>
        <td>mire</td>
        <td>mar</td>
        <td>more</td>
        <td>moor</td>
        <td>mere</td>
        <td>murder</td>
        <td>sour</td>
      </tr>
      <tr>
        <td></td>
        <td>·</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>dear</td>
        <td>fear</td>
        <td>career</td>
        <td>carrier</td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>other</td>
        <td>mother</td>
        <td>brother</td>
        <td>father</td>
        <td>rather</td>
        <td>weather</td>
        <td>whether</td>
        <td>further</td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>br</td>
        <td>bl</td>
        <td>dr</td>
        <td>gr</td>
        <td>gl</td>
        <td>pl</td>
        <td>kl</td>
        <td>kr</td>
        <td>kt</td>
        <td>fr</td>
        <td>ts</td>
        <td>st</td>
        <td>sp</td>
        <td>sk</td>
        <td>skr</td>
      </tr>
      <tr>
        <td data-expect="·Bay ~b~ ·Roe"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td data-expect="·Tea ~b~ ·See"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
    <h3>Half letters</h3>
    <table class="pairings">
      <tr>
        <td>pry</td>
        <td></td>
        <td>pray</td>
        <td></td>
        <td>paw</td>
        <td>:</td>
        <td>try</td>
        <td></td>
        <td>tame</td>
        <td></td>
        <td>tore</td>
        <td>:</td>
        <td>hay</td>
        <td></td>
        <td>hall</td>
      </tr>
      <tr>
        <td data-expect="·Pea ~x~ ·Roe | ·I"></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>:</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>:</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>won/one</td>
        <td></td>
        <td>word</td>
        <td></td>
        <td>work</td>
        <td></td>
        <td>worth</td>
        <td></td>
        <td>wild</td>
        <td></td>
        <td>wise</td>
      </tr>
      <tr>
        <td> = ‌‌</td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>aid</td>
        <td></td>
        <td>dead</td>
        <td></td>
        <td>said</td>
        <td></td>
        <td>gnawed</td>
        <td>:</td>
        <td>haze</td>
        <td></td>
        <td>pays</td>
        <td></td>
        <td>laws</td>
        <td></td>
        <td>cause</td>
        <td></td>
        <td>says</td>
      </tr>
      <tr>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>:</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>till</td>
        <td></td>
        <td>pill</td>
        <td></td>
        <td>hill</td>
        <td>:</td>
        <td>tell</td>
        <td></td>
        <td>pet</td>
        <td></td>
        <td>head</td>
      </tr>
      <tr>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>:</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td colspan="7">Steps</td>
        <td></td>
        <td colspan="7">Double halvings</td>
      </tr>
      <tr>
        <td>lid</td>
        <td></td>
        <td>pod</td>
        <td></td>
        <td>noise</td>
        <td></td>
        <td>use</td>
        <td>:</td>
        <td>lids</td>
        <td></td>
        <td>pods</td>
        <td></td>
        <td>noised</td>
        <td></td>
        <td>used</td>
      </tr>
      <tr>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>:</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <h3>Alternative letter-symbols</h3>
    <table class="pairings">
      <tr>
        <td>no</td>
        <td></td>
        <td>now</td>
        <td></td>
        <td>neck</td>
        <td></td>
        <td>knack</td>
        <td></td>
        <td>(k)nave</td>
        <td></td>
        <td>knife</td>
        <td></td>
        <td>nod</td>
        <td></td>
        <td>need</td>
      </tr>
      <tr>
        <td data-expect="·No ~x~ ·Owe"></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>in</td>
        <td></td>
        <td>anon</td>
        <td></td>
        <td>anode</td>
        <td></td>
        <td>angel</td>
        <td></td>
        <td>end</td>
        <td></td>
        <td>bind</td>
        <td></td>
        <td>under</td>
        <td></td>
        <td>any</td>
        <td></td>
        <td>ounce</td>
        <td></td>
        <td>inch</td>
      </tr>
      <tr>
        <td data-expect="·It ·No.alt"></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>allay</td>
        <td></td>
        <td>averse</td>
        <td></td>
        <td>us</td>
        <td></td>
        <td>uncle</td>
        <td></td>
        <td>among</td>
        <td>:</td>
        <td>lull</td>
        <td></td>
        <td>love</td>
        <td></td>
        <td>fuss</td>
        <td></td>
        <td>must</td>
      </tr>
      <tr>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>:</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
    <hr>
    <table class="pairings">
      <tr>
        <td>dull</td>
        <td></td>
        <td>gull</td>
        <td></td>
        <td>above</td>
        <td></td>
        <td>shovel</td>
        <td></td>
        <td>tusk</td>
        <td></td>
        <td>thus</td>
        <td></td>
        <td>just</td>
        <td></td>
        <td>junk</td>
        <td></td>
        <td>chunk</td>
      </tr>
      <tr>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
        <td>.</td>
        <td></td>
      </tr>
    </table>
  </div>

  <h2>Every Quikscript character</h2>
  <div class="sample-box">
    <table class="sample" id="sample-quikscript">
      <tr><td>&#xE650;</td><td>·Pea</td><td>U+E650</td></tr>
      <tr><td>&#xE651;</td><td>·Bay</td><td>U+E651</td></tr>
      <tr><td>&#xE652;</td><td>·Tea</td><td>U+E652</td></tr>
      <tr><td>&#xE653;</td><td>·Day</td><td>U+E653</td></tr>
      <tr><td>&#xE654;</td><td>·Key</td><td>U+E654</td></tr>
      <tr><td>&#xE655;</td><td>·Gay</td><td>U+E655</td></tr>
      <tr><td>&#xE656;</td><td>·Thaw</td><td>U+E656</td></tr>
      <tr><td>&#xE657;</td><td>·They</td><td>U+E657</td></tr>
      <tr><td>&#xE658;</td><td>·Fee</td><td>U+E658</td></tr>
      <tr><td>&#xE659;</td><td>·Vie</td><td>U+E659</td></tr>
      <tr><td>&#xE65A;</td><td>·See</td><td>U+E65A</td></tr>
      <tr><td>&#xE65B;</td><td>·Zoo</td><td>U+E65B</td></tr>
      <tr><td>&#xE65C;</td><td>·She</td><td>U+E65C</td></tr>
      <tr><td>&#xE65D;</td><td>·J&rsquo;ai</td><td>U+E65D</td></tr>
      <tr><td>&#xE65E;</td><td>·Cheer</td><td>U+E65E</td></tr>
      <tr><td>&#xE65F;</td><td>·Jay</td><td>U+E65F</td></tr>
      <tr><td>&#xE660;</td><td>·Ye</td><td>U+E660</td></tr>
      <tr><td>&#xE661;</td><td>·Way</td><td>U+E661</td></tr>
      <tr><td>&#xE662;</td><td>·He</td><td>U+E662</td></tr>
      <tr><td>&#xE663;</td><td>·Why</td><td>U+E663</td></tr>
      <tr><td>&#xE664;</td><td>·-ing</td><td>U+E664</td></tr>
      <tr><td>&#xE665;</td><td>·May</td><td>U+E665</td></tr>
      <tr><td>&#xE666;</td><td>·No</td><td>U+E666</td></tr>
      <tr><td>&#xE667;</td><td>·Low</td><td>U+E667</td></tr>
      <tr><td>&#xE668;</td><td>·Roe</td><td>U+E668</td></tr>
      <tr><td>&#xE669;</td><td>·Loch</td><td>U+E669</td></tr>
      <tr><td>&#xE66A;</td><td>·Llan</td><td>U+E66A</td></tr>
      <tr><td>&#xE66B;</td><td>·Excite</td><td>U+E66B</td></tr>
      <tr><td>&#xE66C;</td><td>·Exam</td><td>U+E66C</td></tr>
      <tr><td>&#xE66E;</td><td>(</td><td>U+E66E</td></tr>
      <tr><td>&#xE66F;</td><td>)</td><td>U+E66F</td></tr>
      <tr><td>&#xE670;</td><td>·It</td><td>U+E670</td></tr>
      <tr><td>&#xE671;</td><td>·Eat</td><td>U+E671</td></tr>
      <tr><td>&#xE672;</td><td>·Et</td><td>U+E672</td></tr>
      <tr><td>&#xE673;</td><td>·Eight</td><td>U+E673</td></tr>
      <tr><td>&#xE674;</td><td>·At</td><td>U+E674</td></tr>
      <tr><td>&#xE675;</td><td>·I</td><td>U+E675</td></tr>
      <tr><td>&#xE676;</td><td>·Ah</td><td>U+E676</td></tr>
      <tr><td>&#xE677;</td><td>·Awe</td><td>U+E677</td></tr>
      <tr><td>&#xE678;</td><td>·Ox</td><td>U+E678</td></tr>
      <tr><td>&#xE679;</td><td>·Oy</td><td>U+E679</td></tr>
      <tr><td>&#xE67A;</td><td>·Utter</td><td>U+E67A</td></tr>
      <tr><td>&#xE67B;</td><td>·Out</td><td>U+E67B</td></tr>
      <tr><td>&#xE67C;</td><td>·Owe</td><td>U+E67C</td></tr>
      <tr><td>&#xE67D;</td><td>·Foot</td><td>U+E67D</td></tr>
      <tr><td>&#xE67E;</td><td>·Ooze</td><td>U+E67E</td></tr>
    </table>
  </div>

  <h2>Size comparison<br>(multiples of 11px)</h2>
  <div class="sample-box">
    <div class="size-label">11px (1x)</div>
    <div class="sample size-test" style="font-size: 11px;">123 &ldquo;Handgloves&rdquo;?       .</div>

    <div class="size-label">22px (2x)</div>
    <div class="sample size-test" style="font-size: 22px;">123 &ldquo;Handgloves&rdquo;?       .</div>

    <div class="size-label">33px (3x)</div>
    <div class="sample size-test" style="font-size: 33px;">123 &ldquo;Handgloves&rdquo;?       .</div>

    <div class="size-label">44px (4x)</div>
    <div class="sample size-test" style="font-size: 44px;">123 &ldquo;Handgloves&rdquo;?       .</div>
  </div>

  <script type="module">
    const STORAGE_KEY = 'ams-highlights';
    const tables = document.querySelectorAll('.pairings');

    for (const table of tables) {
      const rows = [...table.rows];
      let dataRowIndex = 0;
      for (const row of rows) {
        if (row.querySelector('td[colspan]')) continue;
        const isQuikscript = dataRowIndex % 2 === 1;
        if (isQuikscript) {
          for (const td of row.cells) {
            td.contentEditable = 'true';
          }
        }
        dataRowIndex++;
      }
    }

    function cellPath(td) {
      const table = td.closest('table.pairings');
      const tableIndex = [...tables].indexOf(table);
      const row = td.parentElement;
      const rowIndex = [...table.rows].indexOf(row);
      const cellIndex = [...row.cells].indexOf(td);
      return `${tableIndex}-${rowIndex}-${cellIndex}`;
    }

    function loadHighlights() {
      try {
        return new Set(JSON.parse(localStorage.getItem(STORAGE_KEY)) || []);
      } catch {
        return new Set();
      }
    }

    function saveHighlights(set) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify([...set]));
    }

    const highlighted = loadHighlights();
    for (const path of highlighted) {
      const [ti, ri, ci] = path.split('-').map(Number);
      const td = tables[ti]?.rows[ri]?.cells[ci];
      if (td) td.classList.add('highlighted');
    }

    for (const table of tables) {
      table.addEventListener('click', (e) => {
        const td = e.target.closest('td');
        if (!td || td.isContentEditable) return;
        td.classList.toggle('highlighted');
        const path = cellPath(td);
        if (td.classList.contains('highlighted')) {
          highlighted.add(path);
        } else {
          highlighted.delete(path);
        }
        saveHighlights(highlighted);
      });
    }

    function clearAllHighlights() {
      for (const td of document.querySelectorAll('.pairings td.highlighted')) {
        td.classList.remove('highlighted');
      }
      highlighted.clear();
      saveHighlights(highlighted);
    }

    document.getElementById('clear-highlights').addEventListener('click', clearAllHighlights);
  </script>

  <footer>
    Font Test |
    <a href="specimen.html">Specimen</a> |
    <a href="glyph-editor.html">Glyph Editor</a> |
    <a href="https://github.com/adiabatic/abbots-morton-spaceport">GitHub</a>
  </footer>
</body>
</html>
